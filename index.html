<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FREE4ALLRIDERS | Classic Black Flame Hoodie</title>
    <style>
        :root {
            --primary: #f77bff;
            --secondary: #d800ff;
            --dark: #000000;
            --light: #ffffff;
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
        }
        
        .model-viewer-container {
            width: 100%;
            height: 70vh;
            margin: 2rem auto;
            position: relative;
            border-radius: 30px;
            overflow: hidden;
            border: 2px solid var(--primary);
            background: radial-gradient(circle, rgba(215,0,255,0.1) 0%, rgba(0,0,0,0.8) 70%);
        }
        
        #ar-button {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 0 20px var(--primary);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px var(--primary); }
            50% { box-shadow: 0 0 40px var(--secondary); }
        }
        
        #fallback-viewer {
            width: 100%;
            height: 100%;
            display: none;
        }
    </style>
</head>
<body>
    <section style="padding: 4rem 10%; text-align: center;">
        <h2 style="font-size: 2.5rem; margin-bottom: 1.5rem; color: var(--primary);">CLASSIC BLACK FLAME HOODIE</h2>
        
        <div class="model-viewer-container">
            <!-- Preview Image -->
            <img id="preview-image" src="https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" 
                 alt="Black Flame Hoodie" 
                 style="width: 100%; height: 100%; object-fit: cover;">
            
            <!-- AR Button -->
            <button id="ar-button">VIEW IN 3D</button>
            
            <!-- Fallback Three.js Viewer -->
            <div id="fallback-viewer"></div>
        </div>
        
        <p style="margin-top: 2rem; font-style: italic; color: var(--secondary);">
            "EVERY TRICK HAS A HISTORY"
        </p>
    </section>

    <!-- Three.js for fallback -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
    
    <script>
        const arButton = document.getElementById('ar-button');
        const previewImage = document.getElementById('preview-image');
        const fallbackViewer = document.getElementById('fallback-viewer');
        
        // Check if USDZ is supported (iOS 12+)
        function isUSDZSupported() {
            return /iPhone|iPad|iPod/i.test(navigator.userAgent) && 
                   /OS (12|13|14|15|16|17)_/i.test(navigator.userAgent);
        }
        
        // Initialize Three.js fallback
        function initFallbackViewer() {
            fallbackViewer.style.display = 'block';
            previewImage.style.display = 'none';
            
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, fallbackViewer.clientWidth / fallbackViewer.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(fallbackViewer.clientWidth, fallbackViewer.clientHeight);
            fallbackViewer.appendChild(renderer.domElement);
            
            // Lighting
            const light = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(light);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(0, 1, 1);
            scene.add(directionalLight);
            
            // Load fallback GLB model (replace with your actual GLB file)
            new THREE.GLTFLoader().load(
                'assets/models/hoodie.glb',
                function(gltf) {
                    scene.add(gltf.scene);
                    camera.position.z = 3;
                    
                    function animate() {
                        requestAnimationFrame(animate);
                        renderer.render(scene, camera);
                    }
                    animate();
                },
                undefined,
                function(error) {
                    console.error('Error loading model:', error);
                    fallbackViewer.innerHTML = '<p style="color:white;padding-top:40%;">3D model could not be loaded</p>';
                }
            );
        }
        
        // Button click handler
        arButton.addEventListener('click', function() {
            if (isUSDZSupported()) {
                // For iOS devices - trigger Quick Look
                window.location.href = 'Classic_Black_Flame_Hoodie.usdz';
            } else {
                // For other devices - show Three.js fallback
                initFallbackViewer();
                arButton.style.display = 'none';
            }
        });
        
        // Hide AR button if not iOS
        if (!isUSDZSupported()) {
            arButton.textContent = 'VIEW 3D MODEL';
        }
    </script>
</body>
</html>
